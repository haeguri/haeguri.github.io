<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="twitter:description" content="1. 소개 Gulp는 Node.js 기반의 프로세스 자동화 도구이며 MIT 라이센스의 오픈소스 프로젝트입니다. 회사 일을 하면서 스크립트를 난독화하거나 파일을 복사하는 등의 작업이 반복될 때가 많았는데, Gulp는 이런 반복되는 작업들을 자동화하기 …"/><meta data-react-helmet="true" name="twitter:title" content="자동화 도구 Gulp 살펴보기"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" property="og:description" content="1. 소개 Gulp는 Node.js 기반의 프로세스 자동화 도구이며 MIT 라이센스의 오픈소스 프로젝트입니다. 회사 일을 하면서 스크립트를 난독화하거나 파일을 복사하는 등의 작업이 반복될 때가 많았는데, Gulp는 이런 반복되는 작업들을 자동화하기 …"/><meta data-react-helmet="true" property="og:title" content="자동화 도구 Gulp 살펴보기"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:url" content="https://haeguri.github.io"/><meta data-react-helmet="true" name="description" content="1. 소개 Gulp는 Node.js 기반의 프로세스 자동화 도구이며 MIT 라이센스의 오픈소스 프로젝트입니다. 회사 일을 하면서 스크립트를 난독화하거나 파일을 복사하는 등의 작업이 반복될 때가 많았는데, Gulp는 이런 반복되는 작업들을 자동화하기 …"/><meta name="generator" content="Gatsby 4.11.1"/><style data-href="/styles.4412aabd7d47522d826a.css" data-identity="gatsby-global-css">/*! tailwindcss v2.2.19 | MIT License | https://tailwindcss.com */

/*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */html{-webkit-text-size-adjust:100%;line-height:1.15;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;margin:0}hr{color:inherit;height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],button{-webkit-appearance:button}legend{padding:0}progress{vertical-align:baseline}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{border:0 solid;box-sizing:border-box}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{color:inherit;line-height:inherit;padding:0}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}*,:after,:before{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}body,html{font-family:Noto Sans KR,system-ui,sans-serif}h1{font-size:1.875rem;line-height:2.25rem}code{--tw-bg-opacity:1;background-color:rgba(239,246,255,var(--tw-bg-opacity));border-radius:.375rem;padding:.125rem .375rem}.container{padding-left:1rem;padding-right:1rem;width:100%}@media (min-width:100%){.container{max-width:100%}}@media (min-width:640px){.container{max-width:640px}}.mx-auto{margin-left:auto;margin-right:auto}.-mx-4{margin-left:-1rem;margin-right:-1rem}.my-1{margin-bottom:.25rem;margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mt-10{margin-top:2.5rem}.mt-14{margin-top:3.5rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.mb-10{margin-bottom:2.5rem}.mb-20{margin-bottom:5rem}.ml-4{margin-left:1rem}.ml-auto{margin-left:auto}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.h-16{height:4rem}.h-screen{height:100vh}.w-full{width:100%}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{opacity:0;transform:scale(2)}}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}@keyframes bounce{0%,to{-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}.list-disc{list-style-type:disc}.list-decimal{list-style-type:decimal}.flex-col{flex-direction:column}.items-center{align-items:center}.overflow-x-auto{overflow-x:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.border-t{border-top-width:1px}.border-b{border-bottom-width:1px}.bg-white{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.p-5{padding:1.25rem}.px-0{padding-left:0;padding-right:0}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-6{padding-bottom:1.5rem}.pt-6,.py-6{padding-top:1.5rem}.pb-0{padding-bottom:0}.pb-1{padding-bottom:.25rem}.pb-0\.5{padding-bottom:.125rem}.pl-6{padding-left:1.5rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-lg{font-size:1.125rem}.text-lg,.text-xl{line-height:1.75rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.font-medium{font-weight:500}.font-semibold{font-weight:600}.font-bold{font-weight:700}.leading-6{line-height:1.5rem}.leading-7{line-height:1.75rem}.tracking-normal{letter-spacing:0}.tracking-wide{letter-spacing:.025em}.text-gray-400{--tw-text-opacity:1;color:rgba(156,163,175,var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgba(107,114,128,var(--tw-text-opacity))}.text-blue-500{--tw-text-opacity:1;color:rgba(59,130,246,var(--tw-text-opacity))}*,:after,:before{--tw-shadow:0 0 #0000;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000}@media (min-width:640px){.sm\:-mx-6{margin-left:-1.5rem;margin-right:-1.5rem}.sm\:mt-14{margin-top:3.5rem}.sm\:rounded-md{border-radius:.375rem}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:text-xl{font-size:1.25rem;line-height:1.75rem}}</style><title data-react-helmet="true">자동화 도구 Gulp 살펴보기</title><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"/><link data-react-helmet="true" rel="icon" href="/images/favicon.ico" type="image/x-icon"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link as="script" rel="preload" href="/webpack-runtime-4ae2d50ba75acf715f7c.js"/><link as="script" rel="preload" href="/framework-2219c077a27886037c53.js"/><link as="script" rel="preload" href="/app-7106cfdac7763e44ee9b.js"/><link as="fetch" rel="preload" href="/page-data/introduction-gulp/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3458129946.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="flex flex-col h-screen"><nav class="bg-white flex flex-shrink-0 flex-col w-full h-16 border-b "><div class="flex items-center flex-1 container mx-auto"><a class="text-lg font-medium tracking-normal sm:text-xl" href="/">Haeguri Blog</a><ul class="flex ml-auto"><li class="ml-4"><a href="https://github.com/haeguri" target="_blank" class="tracking-wide text-lg">GitHub</a></li></ul></div></nav><main class="container flex-1 mx-auto mt-6 mb-10 sm:mt-14"><div class="mb-10"><h1 class="font-bold text-4xl">자동화 도구 Gulp 살펴보기</h1><div class="mt-2 text-gray-400 m-l-auto flex">March 31, 2019</div></div><div class="mt-14 mb-5"><h2 class="inline-block pb-0.5 text-2xl font-bold">1. 소개</h2></div><p class="mb-4 leading-7">Gulp는 Node.js 기반의 프로세스 자동화 도구이며 MIT 라이센스의 오픈소스 프로젝트입니다. 회사 일을 하면서 스크립트를 난독화하거나 파일을 복사하는 등의 작업이 반복될 때가 많았는데, Gulp는 이런 반복되는 작업들을 자동화하기 위해 개발된 도구입니다. 또한 Gulp의 플러그인을 사용하면 기능을 다양하게 확장할 수도 있습니다. </p><blockquote class="mb-4 pt-6 pb-1 px-6 bg-gray-100 rounded"><p class="mb-4 leading-7">Gulp 문서 : <a class="text-blue-500 font-semibold break-words" href="https://gulpjs.com" target="_blank" rel="noreferrer">https://gulpjs.com</a></p></blockquote><div class="mt-14 mb-5"><h2 class="inline-block pb-0.5 text-2xl font-bold">2. Gulp를 사용한 이유</h2></div><p class="mb-4 leading-7">최근에는 Gulp보다는 Webpack을 사용하고 있는 것 같습니다. Webpack의 주 목적은 원래 여러 개의 파일들을 하나의 파일로 묶는 <strong class="font-semibold">번들러</strong>입니다. 그리고 플러그인들을 사용하면 번들링하는 과정에서 Gulp처럼 자동화 작업도 함께 처리할 수 있습니다.</p><p class="mb-4 leading-7">그런데 Webpack으로 파일을 묶기 위해서는 각각의 파일에는 <code>import</code>, <code>export</code>같은 ECMAScript 6의 모듈 시스템 구문을 추가해서 Webpack이 파일을 어떻게 번들링할지 알려줘야 합니다. 그리고 Webpack으로 묶여진 소스코드에는 Webpack이 부가적으로 삽입하는 코드도 포함되게 됩니다.</p><p class="mb-4 leading-7">담당하던 프로젝트에서는 아직 ECMAScript 5를 사용하고 있었고, 자동화가 필요한 부분이 주로 파일 복사와 소스 난독화 작업이었기 때문에, 소스 번들링이 주 목적인 Webpack과는 맞지 않다고 생각해서 Gulp를 적용했습니다.</p><div class="mt-14 mb-5"><h2 class="inline-block pb-0.5 text-2xl font-bold">3. 환경 설정</h2></div><p class="mb-4 leading-7">Gulp 설치 방법은 공식 문서에도 잘 나와있는데, 설치 과정을 정리하면 아래와 같습니다.</p><h3 class="mt-8 mb-3 text-xl font-semibold my-1">3.1. Node, NPM 설치 확인</h3><p class="mb-4 leading-7">먼저 개발 환경에 설치된 NodeJS, NPM의 버전을 확인해야 합니다. 콘솔에서 아래의 명령어를 실행해서 버전을 확인하고 버전을 업데이트하거나 설치해야 합니다. 각 버전들은 Gulp 공식 홈페이지를 참고해서 지정했습니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">node</span><span class="token plain"> --version</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">v8.11.1</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">npm</span><span class="token plain"> --version</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token number" style="color:#5a9bcf">5.6</span><span class="token plain">.0</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><h3 class="mt-8 mb-3 text-xl font-semibold my-1">3.2. gulp-cli 설치</h3><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">npm</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">install</span><span class="token plain"> --global gulp-cli</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7"><code>gulp-cli</code>는 Gulp를 콘솔에서 편리하게 실행할 수 있게 해주는 유틸리티 도구입니다. 콘솔에서 위의 명령어를 입력해서 <code>gulp-cli</code>를 글로벌 영역에 설치합니다.</p><h3 class="mt-8 mb-3 text-xl font-semibold my-1">3.3 gulp 설치</h3><p class="mb-4 leading-7">Gulp는 <code>gulp-cli</code>와 다르게 전역으로 설치하지 않고, 개발 프로젝트에만 설치하면 됩니다. 먼저 <code>gulp</code>를 테스트해볼 샘플 개발 프로젝트인 <code>gulp-example</code>를 생성합니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">mkdir</span><span class="token plain"> gulp-example</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">cd</span><span class="token plain"> ./gulp-example</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">npm</span><span class="token plain"> init</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7"><code>npm init</code> 명령어는 &#x27;gulp-exmaple&#x27; 프로젝트에 NPM 패키지들을 설치하기 위한 초기화 작업을 합니다. <code>npm init</code> 명령어를 입력하면 콘솔에서 프로젝트 이름이나 버전 등의 정보들을 물어보는데, 모두 &#x27;enter&#x27; 키를 입력하면 디폴트값으로 세팅됩니다. </p><p class="mb-4 leading-7">입력이 모두 끝나면 &#x27;gulp-example&#x27; 프로젝트에는 <code>package.json</code>라는 파일이 생성되고, 이 파일을 살펴보면 <code>npm init</code>으로 입력한 정보가 들어간 것을 확인할 수 있습니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">npm</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">install</span><span class="token plain"> --save-dev gulp</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7">다음으로 위의 명령어를 실행해서 Gulp를 설치합니다. <code>--save-dev</code> 옵션을 추가하는 이유는 Gulp가 개발 단계에서만 필요한 패키지이기 때문입니다. Gulp가 설치되고 나면 <code>package.json</code>의 <code>devDependencies</code>에 <code>gulp</code>가 추가되는 것을 확인할 수 있습니다.</p><p class="mb-4 leading-7">이제 간단한 예제를 실행해보기 위해서 현재 경로에서 <strong class="font-semibold">gulpfile.js</strong>를 만들고, 다음의 내용을 작성합니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">defaultTask</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">cb</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token function" style="color:#79b6f2">cb</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">exports</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword module" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> defaultTask</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7">그리고 콘솔에서 Gulp를 실행하고 결과를 확인합니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> gulp</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">17</span><span class="token plain">:51:24</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> Using gulpfile ~/Workspace/gulp-example/gulpfile.js</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">17</span><span class="token plain">:51:24</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> Starting </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">17</span><span class="token plain">:51:24</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> Finished </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token plain"> after </span><span class="token number" style="color:#5a9bcf">3.62</span><span class="token plain"> ms</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><div class="mt-14 mb-5"><h2 class="inline-block pb-0.5 text-2xl font-bold">4. 태스크</h2></div><p class="mb-4 leading-7">Gulp에서 수행하는 작업의 단위를 <strong class="font-semibold">Task(태스크)</strong>라고 부르고, 태스크는 <strong class="font-semibold">gulpfile.js</strong>에 작성합니다.</p><p class="mb-4 leading-7">3.X 버전까지는 <code>task()</code> 메서드로 태스크를 등록할 수 있었지만, 4.0 버전부터는 함수로도 태스크를 선언할 수 있게 되었습니다. Gulp가 제공하는 파일 시스템이나 Command Line을 쉽게 다루기 위한 API를 제외하고는,  그 외의 나머지 것들은 순수 자바스크립트나 Node 모듈을 이용해서 태스크를 작성할 수 있습니다.</p><h3 class="mt-8 mb-3 text-xl font-semibold my-1">4.1 실행</h3><p class="mb-4 leading-7">태스크는 외부에서 사용할 수 있는 <strong class="font-semibold">Public</strong> 태스크와 내부에서 사용하는 <strong class="font-semibold">Private</strong> 태스크로 나눌 수 있습니다. 태스크를 외부에서 사용하게 하려면 <code>exports</code> 객체에 태스크(함수)를 추가해야 합니다. 이렇게 내보내진 Public 태스크는 Command Line에서 실행할 수 있게 됩니다.</p><p class="mb-4 leading-7">Private 태스크는 Command Line에서 실행할 수 없지만, gulpfile에서는 사용할 수 있습니다. 예를 들어서, 순차적으로 태스크를 실행하는 <code>series()</code> 메서드 혹은 최대한 동시에 태스크를 실행하는 <code>parallel()</code> 메서드에서도 사용할 수 있습니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> series </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gulp&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token comment" style="color:#999999">// Private 태스크</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">clean</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">cb</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">// clean 태스크 내용..</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">cb</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token comment" style="color:#999999">// Public 태스크</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">cb</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">// build 태스크 내용..</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">cb</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">exports</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">build</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> build</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">exports</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword module" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">series</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">clean</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> build</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7"><code>exports.default</code>로 내보내진 태스크를 실행하기 위해서는 다음의 명령어를 입력합니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> gulp</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7"><code>exports.build</code>로 내보내진 태스크를 실행하려면 다음의 명령어를 입력합니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> gulp build</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><h3 class="mt-8 mb-3 text-xl font-semibold my-1">4.2 비동기 완료</h3><p class="mb-4 leading-7">gulpfile에서 작성하는 태스크들의 연산들은 파일의 읽기/쓰기가 대부분인데, 대부분 비동기적으로 처리됩니다. 그래서 Gulp에서는 자신의 시스템에 등록된 비동기 태스크들이 완료 시점과 성공 여부를 알 수 있어야 합니다. 그래야 태스크의 성공/실패에 따른 처리를 할 수 있기 때문입니다.</p><p class="mb-4 leading-7">태스크가 Gulp에게 이러한 정보를 알려주는 방법은 크게 두 가지로 나눌 수 있습니다.</p><ul class="mb-4 pl-6 list-decimal"><li class="mb-2 leading-6">&#x27;error-first callback&#x27;(에러-우선 콜백)을 받아서 그 콜백을 호출</li><li class="mb-2 leading-6">stream, promise, event emitter, child process, observable 중 하나를 반환</li></ul><p class="mb-4 leading-7">&#x27;에러-우선 콜백&#x27;은 Node.js 공식 문서에서도 설명하고 있는 패턴인데, 비동기 콜백 함수에서 비동기 연산의 완료와 성공여부를 알 수 있는 방법입니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">// nodejs의 &#x27;에러-우선 콜백&#x27; 예제</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> fs </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">errorFirstCallback</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#8dc891">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token console class-name" style="color:#FAC863">console</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">error</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;There was an error&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c5a5c5">return</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token console class-name" style="color:#FAC863">console</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">fs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">readFile</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/some/file/that/does-not-exist&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> errorFirstCallback</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">fs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">readFile</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/some/file/that/does-exist&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> errorFirstCallback</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7">&#x27;에러-우선 콜백&#x27;은 첫 번째 인자로 에러 객체(위에서는 <code>err</code>)를 받는데, 이게 <code>null</code>이나 <code>undefined</code>이면 성공했다는 의미이고, 아니면 에러가 발생했다는 의미입니다.</p><p class="mb-4 leading-7">다시 Gulp로 돌아와서, 태스크의 첫 번째 인자로는 콜백 함수가 넘어오는데, 이 콜백 함수가 <strong class="font-semibold">&#x27;에러-우선 콜백&#x27;</strong> 입니다. </p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">task1</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">cb</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">isSuccess</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token function" style="color:#79b6f2">cb</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// 에러-우선 콜백에 undefined 전달</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#c5a5c5">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token function" style="color:#79b6f2">cb</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Error</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">’some error raised’</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// 에러가 발생하면, 에러 객체를 전달</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">exports</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">task1</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> task1</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7">&#x27;에러-우선 콜백&#x27;을 호출하는 경우가 아니면, 태스크는 stream, promise, event emitter, child process, observable 중 하나를 반환해야 합니다. 이 중에서 stream을 반환하는 예제는 다음과 같습니다. </p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> src </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gulp&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">task1</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c5a5c5">return</span><span class="token plain"> gulp</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">src</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;./a.js&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">dest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;./output/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">exports</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">task1</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> task1</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7"><code>src()</code> 와 <code>dest()</code> 메서드는 Gulp에서 제공하는 API 입니다. <code>src()</code> 메서드는 주어진 경로에 있는 파일을 읽어서 읽기 가능한 Node.js <a class="text-blue-500 font-semibold break-words" href="https://github.com/FEDevelopers/tech.description/wiki/Node.js-Stream-%EB%8B%B9%EC%8B%A0%EC%9D%B4-%EC%95%8C%EC%95%84%EC%95%BC%ED%95%A0-%EB%AA%A8%EB%93%A0-%EA%B2%83" target="_blank" rel="noreferrer">Stream</a>을 생성합니다.  <code>dest()</code> 메서드는 인자로 주어진 파일 경로에 파일을 쓸 수 있는 Stream을 생성합니다. </p><p class="mb-4 leading-7"><code>pipe()</code> 는 Node.js Stream API 중 하나입니다. <code>pipe()</code>는 쓰기 가능한 스트림을 읽기 가능한 스트림으로 연결할 수 있는 메서드이고, 역시 Stream을 반환합니다. 위의 gulpfile에서는 <code>task1()</code> 함수를 실행하면 <code>.pipe</code>에 의해 Stream을 반환하기 때문에, Gulp에서 태스크 완료나 성공 여부를 알 수 있습니다.</p><h3 class="mt-8 mb-3 text-xl font-semibold my-1">4.3 Stream에 파일 추가하기</h3><p class="mb-4 leading-7"><code>src()  </code> 메서드는 파이프라인의 중간에도 위치해서 기존의 Stream에 파일을 추가할 수도 있습니다. 예를 들어서, 모든 소스코드를 난독화하기 전에, 특정 파일을 babel로 트랜스파일하는 것과 같은 작업을 할 수 있습니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> src</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> dest </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gulp&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> uglify </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gulp-uglify&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> babel </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gulp-babel&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">minifyCode</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">src</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;./src/*&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">babel</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token literal-property property" style="color:#5a9bcf">presets</span><span class="token operator" style="color:#d7deea">:</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;@babel/preset-env&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">src</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;./vendor/*&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">uglify</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">dest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;./output&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">exports</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword module" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> minifyCode</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><h3 class="mt-8 mb-3 text-xl font-semibold my-1">4.4 현재 Stream 출력하기</h3><p class="mb-4 leading-7"><code>dest()</code> 메서드도 파이프라인의 중간에 위치할 수 있습니다. <code>dest()</code> 는 현재의 Stream을 주어진 경로에 파일을 출력하는 역할을 합니다. 소스를 난독화 할 때, 난독화 하지 않은 원본 소스도 함께 출력하고 싶을 때 유용합니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> src</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> dest </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gulp&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> uglify </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gulp-uglify&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> babel </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gulp-babel&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> rename </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gulp-rename&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">minifyCode</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">src</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;src/*.js&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">babel</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token literal-property property" style="color:#5a9bcf">presets</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;@babel/preset-env&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">src</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;vendor/*.js&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">dest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;output/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">uglify</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">rename</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#5a9bcf">extname</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;.min.js&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">pipe</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">dest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;output/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">exports</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword module" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> minifyCode</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7">위에서 <code>minifyCode</code>라는 태스크가 처리하는 작업들을 순서대로 작성해보면 다음과 같습니다.</p><ul class="mb-4 pl-6 list-decimal"><li class="mb-2 leading-6">&#x27;src/&#x27; 디렉토리에 있는 모든 &#x27;js&#x27; 파일을 찾아서 Stream에 추가한다.</li><li class="mb-2 leading-6">현재 Stream의 파일들을 babel로 트랜스파일한다.</li><li class="mb-2 leading-6">&#x27;vendor/&#x27; 디렉토리에 있는 모든 &#x27;js&#x27; 파일을 찾아서 Stream에 추가한다.</li><li class="mb-2 leading-6"><strong class="font-semibold">현재 Stream에 있는 파일들을 &#x27;output/&#x27; 디렉토리에 출력한다.</strong> </li><li class="mb-2 leading-6">현재 Stream에 있는 파일들에 대해서 ugilify로 난독화한다.</li><li class="mb-2 leading-6">현재 Stream에 있는 파일들에 대해서 확장자의 이름을 &#x27;.min.js&#x27;로 수정한다.</li><li class="mb-2 leading-6"><strong class="font-semibold">현재 Stream에 있는 파일들을 &#x27;output/&#x27; 디렉토리에 출력한다.</strong></li></ul><p class="mb-4 leading-7">파일 구조가 어떻게 변했는지 살펴보기 위해, <code>minifyCode</code> 태스크가 실행되기 전에는 파일 구조가 다음과 같았다면,</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token plain">gulp-example/</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">|- src/</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">   |- app.js</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">|- vendor/</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">   |- jquery.js</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">|- output/</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p class="mb-4 leading-7">Gulp가 <code>minifyCode</code> 태스크를 실행하고 난 다음에는 파일 구조가 다음과 같을 것입니다.</p><pre><pre class="text-sm p-5 mb-4 -mx-4 overflow-x-auto sm:-mx-6 sm:rounded-md" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token plain">gulp-example/</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">|- src/</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">   |- app.js</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">|- vendor/</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">   |- jquery.js</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">|- output/</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">   |- app.js</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">   |- app.min.js</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">   |- jquery.js</span></div><div class="token-line" style="color:#ffffff"><span class="token plain">   |- jquery.min.js</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><div class="mt-14 mb-5"><h2 class="inline-block pb-0.5 text-2xl font-bold">5. 참고하면 좋은 자료</h2></div><ul class="mb-4 pl-6 list-disc"><li class="mb-2 leading-6">Gulp 4.0 달라진 것들 : <a class="text-blue-500 font-semibold break-words" href="https://programmingsummaries.tistory.com/393" target="_blank" rel="noreferrer">https://programmingsummaries.tistory.com/393</a></li><li class="mb-2 leading-6">Gulp 공식 사이트 : <a class="text-blue-500 font-semibold break-words" href="https://gulpjs.com" target="_blank" rel="noreferrer">https://gulpjs.com</a></li><li class="mb-2 leading-6">Gulp 주요 개념들 : <a class="text-blue-500 font-semibold break-words" href="https://gulpjs.com/docs/en/api/concepts" target="_blank" rel="noreferrer">https://gulpjs.com/docs/en/api/concepts</a></li><li class="mb-2 leading-6">프론트엔드 개발을 위한 Gulp <a class="text-blue-500 font-semibold break-words" href="https://github.com/FEDevelopers/tech.description/wiki/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%9C%84%ED%95%9C-Gulp" target="_blank" rel="noreferrer">https://github.com/FEDevelopers/tech.description/wiki/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%9C%84%ED%95%9C-Gulp</a></li></ul><div class="mb-20"></div><div id="disqus_thread"></div></main><footer class="mt-10"><div class="container flex items-center mx-auto border-t h-16">©<!-- --> <a href="https://github.com/haeguri" target="_blank">haeguri</a>, Built with Gatsby</div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/introduction-gulp/";window.___webpackCompilationHash="0e1383fe15d2a9f347f7";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-a7163f1c154bc39177d7.js"],"app":["/app-7106cfdac7763e44ee9b.js"]};/*]]>*/</script><script src="/polyfill-a7163f1c154bc39177d7.js" nomodule=""></script><script src="/app-7106cfdac7763e44ee9b.js" async=""></script><script src="/framework-2219c077a27886037c53.js" async=""></script><script src="/webpack-runtime-4ae2d50ba75acf715f7c.js" async=""></script></body></html>