<!DOCTYPE html><html lang="ko"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ( 번역 ) Styled Component Tips and Tricks · Haeguri Devlog</title><meta name="description" content="( 번역 ) Styled Component Tips and Tricks - Haegyun Jung"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://github.com/haeguri/atom.xml" title="Haeguri Devlog"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/haeguri" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">( 번역 ) Styled Component Tips and Tricks</h1><div class="post-info">2018년 8월 20일</div><div class="post-content"><blockquote>
<p><code>styled-components</code>는 React 컴포넌트를 스타일링하기 위한 라이브러리다.<br>개인 프로젝트에 이 라이브러리를 적용하기 위한 자료를 찾던 중 <a href="https://github.com/styled-components/styled-components/blob/master/docs/tips-and-tricks.md">유용한 팁을 다룬 문서</a>를 발견해서 번역하였다.</p>
</blockquote>
<h3 id="컴포넌트-조정"><a href="#컴포넌트-조정" class="headerlink" title="컴포넌트 조정"></a>컴포넌트 조정</h3><p><code>0.5em 2em</code>의 <code>padding</code>을 가지는 <code>&lt;Button&gt;</code> 컴포넌트가 있다고 하자.</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> Button <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token string">`
    padding: 0.5em 2em;

    /* ... */
`</span></span><span class="token punctuation">;</span>
</code></pre>
<p>이제 디자이너가 기사에 새로운 덧글 섹션을 추가했고, 덧글 섹션의 버튼을 일반 섹션보다 작게 만들고 싶다.</p>
<p>삽입되는 함수를 이용하면 버튼 사이즈를 조정하는 것은 쉽다.</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> Button <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token string">`
    /* 작은 버튼에는 padding을 더 작게 적용한다면 */
    padding: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props <span class="token operator">=</span><span class="token operator">></span> props<span class="token punctuation">.</span>small <span class="token operator">?</span> <span class="token string">'0.25em 1em'</span> <span class="token punctuation">:</span> <span class="token string">'0.5em 2em'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;

    /* ... */
`</span></span><span class="token punctuation">;</span>
</code></pre>
<p>그러면 덧글 섹션에서는 <code>&lt;Button&gt;</code>이 작아야 함을 쉽게 표현할 수 있다.</p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span><span class="token punctuation">></span></span>This is a normal button<span class="token operator">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name">small</span><span class="token punctuation">></span></span>This is a small button<span class="token operator">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>
</code></pre>
<h3 id="자바스크립트를-사용하기"><a href="#자바스크립트를-사용하기" class="headerlink" title="자바스크립트를 사용하기"></a>자바스크립트를 사용하기</h3><p>텍스트가 컨테이너 요소의 넓이보다 길어서 해당 라인의 오버플로를 생략기호(<code>…</code>)로 처리하고 싶을 때, 세 가지의 CSS 프로퍼티가 필요하다.</p>
<pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token class">.truncate</span> </span><span class="token punctuation">{</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>컨테이너 요소의 넓이도 또한 명확하게 설정되어야 할 필요가 있다.</p>
<pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token class">.truncate</span> </span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">/* 특정한 넓이가 되어야 한다 */</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">250</span>px<span class="token punctuation">;</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>끝을 잘라내는 별개의 컴포넌트를 만들 수 있지만, 여기서 CSS를 재사용하는 것은 나쁜 아이디어가 아니다. 끝을 잘라내려고 하는 모든 컴포넌트에서 앞의 CSS 코드를 하드코딩하는 것 대신에 다음의 함수를 작성할 수 있다.</p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">// style-utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">truncate</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`
        width: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    `</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>그러면 다음과 같이 같이 사용할 수 있다.</p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> truncate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../style-utils'</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// div가 텍스트를 생략부호로 잘라내게 만든다.</span>
<span class="token keyword">const</span> Box <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token string">`
    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> <span class="token function">truncate</span><span class="token punctuation">(</span><span class="token string">'250px'</span><span class="token punctuation">)</span> <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    background: papayawhip;
`</span></span><span class="token punctuation">;</span>
</code></pre>
<p>어떠한가? 이것은 Sass의 믹스인(mixin)과 정확하게 같다. (CSS 위에 임의로 추가 된 구문이 아니라는 것만 제외하면 이것은 단지 자바스크립트다)</p>
<h2 id="더욱-강력한-예제"><a href="#더욱-강력한-예제" class="headerlink" title="더욱 강력한 예제"></a>더욱 강력한 예제</h2><p>Sass 믹스인의 강력한 기능 중 하나는 <code>@content</code>다. <code>@content</code>는 React 컴포넌트로 <code>props.children</code>을 넘기는 것과 비슷하게 동작한다.</p>
<pre class=" language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@mixin</span> handheld</span> <span class="token punctuation">{</span>
    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 420px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
        <span class="token atrule"><span class="token rule">@content</span><span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.box</span> </span><span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">16</span>px<span class="token punctuation">;</span>
    <span class="token atrule"><span class="token rule">@include</span> handheld</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">14</span>px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>우리는 자바스크립트가 있으니, 더 강력한 것을 할 수 있다.</p>
<pre class=" language-css"><code class="language-css"><span class="token selector">// style-utils<span class="token class">.js</span>
import </span><span class="token punctuation">{</span> css <span class="token punctuation">}</span> <span class="token selector">from 'styled-components'

export const media = </span><span class="token punctuation">{</span>
    <span class="token property">handheld</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">...</span>args<span class="token punctuation">)</span> => css`
        <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 420px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
            <span class="token selector">$</span><span class="token punctuation">{</span> <span class="token function">css</span><span class="token punctuation">(</span><span class="token number">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    `
<span class="token punctuation">}</span>
</code></pre>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> media <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../style-utils'</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 휴대용 디바이스에서 텍스트의 크기를 줄인</span>
<span class="token keyword">const</span> Box <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token string">`
    font-size: 16px;
    ${ media.handheld`</span></span>
        font<span class="token operator">-</span>size<span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token template-string"><span class="token string">` }
`</span></span><span class="token punctuation">;</span>
</code></pre>
<p>혹시 <code>css</code>가 위의 예제에서 필요한 이유가 분명하지 않은가? <a href="https://www.styled-components.com/docs/advanced#tagged-template-literals" target="_blank" rel="noopener">Tagged Template Literals</a> 글을 확인해라.</p>
<h4 id="미디어-템플릿"><a href="#미디어-템플릿" class="headerlink" title="미디어 템플릿"></a>미디어 템플릿</h4><p>자바스크립트의 기능적인 특성으로 우리는 미디어 쿼리에서 스타일을 감싸기 위한 Tagged Template Literal을 쉽게 정의할 수 있다.</p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> css <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'styled-components'</span>

<span class="token comment" spellcheck="true">// 여기에 있는 사이즈는 임의적이며 원하는 값으로 설정해도 관계없다.</span>
<span class="token keyword">const</span> sizes <span class="token operator">=</span> <span class="token punctuation">{</span>
    giant<span class="token punctuation">:</span> <span class="token number">1170</span><span class="token punctuation">,</span>
    desktop<span class="token punctuation">:</span> <span class="token number">992</span><span class="token punctuation">,</span>
    tablet<span class="token punctuation">:</span> <span class="token number">768</span><span class="token punctuation">,</span>
    phone<span class="token punctuation">:</span> <span class="token number">376</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// `sizes`를 순회하며 미디어 템플릿을 만든다.</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> media <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>sizes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>accumulator<span class="token punctuation">,</span> label<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 크로스 브라우징을 적절하게 하기 위해 중단점에서 em을 사용하고,</span>
    <span class="token comment" spellcheck="true">// 사용자가 브라우저의 글꼴 크기를 변경하도록 지원한다. :https://zellwk.com/blog/media-query-units/</span>
    <span class="token keyword">const</span> emSize <span class="token operator">=</span> sizes<span class="token punctuation">[</span>label<span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">16</span>
    accumulator<span class="token punctuation">[</span>label<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> css<span class="token template-string"><span class="token string">`
        @media (max-width: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>emSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">em) {
            </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        }
    `</span></span>
    <span class="token keyword">return</span> accumulator
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>이제 미디어 템플릿을 정의했으니, 다음과 같이 사용할 수 있다.</p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">const</span> Container <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token string">`
    color: #333;
    ${media.desktop`</span></span>padding<span class="token punctuation">:</span> <span class="token number">0</span> 20px<span class="token punctuation">;</span><span class="token template-string"><span class="token string">`}
    ${media.tablet`</span></span>padding<span class="token punctuation">:</span> <span class="token number">0</span> 10px<span class="token punctuation">;</span><span class="token template-string"><span class="token string">`}
    ${media.phone`</span></span>padding<span class="token punctuation">:</span> <span class="token number">0</span> 5px<span class="token punctuation">;</span><span class="token template-string"><span class="token string">`}
`</span></span>
</code></pre>
<h3 id="Refs-to-DOM-Nodes"><a href="#Refs-to-DOM-Nodes" class="headerlink" title="Refs to DOM Nodes"></a>Refs to DOM Nodes</h3><p>Styled Component에 <code>ref</code>를 넘겨주면 <code>StyledComponent</code> 레퍼에 ref를 넘겨줄 것이다. 그래서 <code>focus</code>같은 DOM 메서드들을 호출할 수 없다. 래핑된 DOM 노드에 대한 <code>ref</code>를 가져오려면 <code>innerRef</code> 프로퍼티를 넘겨야 한다.</p>
<blockquote>
<p><strong>주의</strong>: <code>innerRef</code>는 콜백 ref(<code>ref = {comp =&gt; this.bla = comp</code>)와 (React 16.3부터 사용가능한) <code>React.createRef()</code>로 만든 ref를 지원한다.  refs 기반 문자열이 미래에 버려질 것이기 때문에 너무 걱정하지 말고, <code>createRef()</code> 혹은 콜백 패턴을 사용해라.</p>
</blockquote>
<p>다음은 <code>createRef()</code>를 사용한 예제다.</p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">const</span> StyledInput <span class="token operator">=</span> styled<span class="token punctuation">.</span>input<span class="token template-string"><span class="token string">`
    color: paleviolet;
`</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>input <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>StyledInput</span> <span class="token attr-name">innerRef</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>콜백을 사용하면 이렇다.</p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">const</span> StyledInput <span class="token operator">=</span> styled<span class="token punctuation">.</span>input<span class="token template-string"><span class="token string">`
    color: paleviolet;
`</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>StyledInput</span> <span class="token attr-name">innerRef</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>comp<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>input <span class="token operator">=</span> comp <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div></article></div></main><footer><div class="paginator"><a href="/2018/07/29/react-refs/" class="next">NEXT</a></div><div class="copyright"><p>© 2018 <a href="https://github.com/haeguri">Haegyun Jung</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>