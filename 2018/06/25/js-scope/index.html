<!DOCTYPE html><html lang="ko"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 자바스크립트 스코프 · private dev log</title><meta name="description" content="자바스크립트 스코프 - Haegyun Jung"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://github.com/haeguri/atom.xml" title="private dev log"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/haeguri" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">자바스크립트 스코프</h1><div class="post-info">2018년 6월 25일</div><div class="post-content"><p>프로그래밍에서 변수의 스코프(Scope)는 변수에 접근할 수 있는 범위를 결정한다. 변수는 어떤 스코프에서 선언되었는가에 따라서 변수에 접근할 수 있는 범위가 달라진다. 프로그래밍 언어들은 저마다의 스코프 규칙을 갖고 있으며 자바스크립트도 역시 자신만의 규칙을 갖고 있다. 자바스크립트의 스코프는 크게 전역 스코프(Global Scope)와 지역 스코프(Local Scope)로 나뉜다.</p>
<h2 id="전역-스코프"><a href="#전역-스코프" class="headerlink" title="전역 스코프"></a>전역 스코프</h2><p>전역 스코프는 모든 자바스크립트 코드에서 접근할 수 있는 공간이라 보면 된다. 전역 스코프에 전역 변수를 선언하면 그 변수는 어디서든 접근할 수 있게 된다. 전역 변수를 선언하는 방법은 함수 밖에서 <code>var</code> 키워드로 변수를 선언하면 된다. </p>
<h4 id="전역변수-선언-var"><a href="#전역변수-선언-var" class="headerlink" title="전역변수 선언 - var"></a>전역변수 선언 - <code>var</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    var globalA = 1;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    function print() &#123;</span></span><br><span class="line"><span class="undefined">        console.log(globalA);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    console.log(globalA);</span></span><br><span class="line"><span class="undefined">    print();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    console.log(globalA);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">1</span><br><span class="line">1</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<h4 id="전역변수-선언-window"><a href="#전역변수-선언-window" class="headerlink" title="전역변수 선언 - window"></a>전역변수 선언 - <code>window</code></h4><p>전역변수를 선언하는 또 다른 방법이 있는데, 자바스크립트 내장 객체인 <code>window</code> 객체의 프로퍼티에 전역 변수로 사용할 데이터를 추가하는 방법이다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    window.globalA = 1;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    function print() &#123; </span></span><br><span class="line"><span class="undefined">        console.log(globalA); </span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    console.log(globalA);</span></span><br><span class="line"><span class="undefined">    print();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    console.log(globalA); </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">1</span><br><span class="line">1</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p><code>window</code> 객체의 프로퍼티로 <code>globalA</code>를 추가하면, 앞에서 <code>var</code>로 선언한 것과 동일하게 전역변수로서 사용할 수 있게 된다. 반대로 <code>var</code>로 전역 변수를 선언하더라도 <code>window</code> 객체의 프로퍼티로 추가되는데, 이것은 <code>hasOwnProperty</code> 메서드로 확인해볼 수 있다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    var globalA = 1;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    console.log(window.hasOwnProperty(‘globalA’));</span></span><br><span class="line"><span class="undefined">    console.log(window.globalA === 1); </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">true</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<h4 id="전역함수-선언"><a href="#전역함수-선언" class="headerlink" title="전역함수 선언"></a>전역함수 선언</h4><p>전역 스코프에는 변수 뿐만 아니라 <strong>함수</strong>도 선언할 수 있다. 아래의 코드를 보자.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    function globalFunc() &#123;</span></span><br><span class="line"><span class="undefined">        console.log('global function');</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    globalFunc();</span></span><br><span class="line"><span class="undefined">    console.log(window.hasOwnProperty(‘globalFunc’));</span></span><br><span class="line"><span class="undefined">    console.log(window.globalFunc === globalFunc); </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">&apos;global function&apos;</span><br><span class="line">true</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<p>두 번째 <code>&lt;script&gt;</code>에서는 첫 번째 <code>&lt;script&gt;</code>에서 선언된 <code>globalFunc</code> 함수를 호출하고 있으며, 실행결과를 보면 정상적으로 함수를 호출하는 것을 확인할 수 있다. 또 전역변수의 경우와 마찬가지로 전역함수를 선언했을 때도 <code>window</code> 객체에 추가되는 것을 <code>hasOwnProperty</code> 메서드로 확인할 수 있다. </p>
<h4 id="전역-스코프를-다룰-때-유의할-점"><a href="#전역-스코프를-다룰-때-유의할-점" class="headerlink" title="전역 스코프를 다룰 때 유의할 점"></a>전역 스코프를 다룰 때 유의할 점</h4><p>전역 스코프는 어디서든 접근할 수 있기 때문에 내가 선언한 전역변수를 다른 사람이 작성한 코드에서 값을 바꿔버릴 수도 있어 위험하다. 또 소스코드 상에서 전역변수를 무분별하게 사용하다가 변수가 필요없어져 선언문을 지우려고 할 경우, 해당 변수가 어디서 사용되는지 일일이 다 확인해야 하기 때문에 프로그램을 수정하기 어렵게 만들기도 한다. 따라서 전역스코프에 데이터를 추가할 때는 신중하게 생각해보는 것이 좋다.</p>
<h2 id="지역-스코프"><a href="#지역-스코프" class="headerlink" title="지역 스코프"></a>지역 스코프</h2><p>지역 스코프에 변수를 선언하면 변수의 범위를 어디서 어디까지로 제한할 수 있다. 예전의 자바스크립트에서는 <strong>함수</strong> 단위로만 지역 변수를 선언할 수 있었지만, 최신 자바스크립트(ECMAScript 6이상)에서는 <strong>블록(<code>{ }</code>)</strong> 단위로 지역 변수를 선언할 수 있게 됐다. 먼저 알아볼 것은 함수 단위로 스코프를 형성하는 함수 스코프이다. </p>
<h4 id="함수-스코프"><a href="#함수-스코프" class="headerlink" title="함수 스코프"></a>함수 스코프</h4><p>함수 스코프에 변수를 선언하면 그 변수는 변수 선언문이 있는 함수 내부에서만 접근할 수 있고, 함수 외부에서는 함수 내부에 선언된 변수에 접근할 수 없다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> globalA = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> localA = <span class="number">2</span>; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'globalA = '</span>, globalA);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'localA = '</span>, localA); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'localA = '</span>, localA);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">globalA = 1</span><br><span class="line">localA = 2</span><br><span class="line">Uncaught ReferenceError: localA is not defined</span><br></pre></td></tr></table></figure>
<p>먼저 <code>f1</code> 함수에서 <code>globalA</code>를 <code>console.log</code>로 출력하는 부분을 살펴보자. <code>f1</code> 함수에서는 <code>globalA</code>가 선언되지 않았다. 자바스크립트는 현재 코드가 실행되고 있는 스코프에서 <code>globalA</code>를 찾을 수 없다면, <strong>한 단계 위의 스코프</strong>로 올라가서 변수를 찾기 시작한다. <code>f1</code> 함수 스코프의 <strong>한 단계 위의 스코프</strong>는 앞에서 배웠던 <strong>전역 스코프</strong>이다. 다행히도 전역 스코프에는 <code>globalA</code>가 선언되어 있으므로 <code>globalA</code>의 값을 출력할 수 있다. </p>
<p>다음으로 <code>f1</code> 함수에서 <code>localA</code>가 출력되는 부분이다. <code>localA</code>를 출력하는 코드가 속한 <code>f1</code> 함수 스코프에는 <code>localA</code>가 선언되어 있다. 따라서 상위 스코프로 올라갈 필요도 없이 <code>f1</code> 함수 스코프에서 <code>localA</code>를 찾아 출력할 수 있다.</p>
<p>마지막으로 <strong>전역 스코프</strong>에서 <code>localA</code>를 출력하는 부분이다. 이번에는 <code>localA</code>를 출력하는 코드가 전역 스코프에 속해있다. 전역 스코프에는 <code>localA</code>가 선언된 적이 없으므로 상위 스코프로 올라가서 찾아야 하는데, 자바스크립트에서는 전역 스코프가 최상위 스코프이므로 더 이상 위로 올라갈 스코프가 없다. 따라서 <code>localA</code>를 찾을 수 없다는 에러가 발생한다. </p>
<!-- 
#### 중첩된 함수 스코프

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> globalA = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> localA = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> localB = <span class="number">3</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'globalA = '</span>, globalA);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'localA = '</span>, localA);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f2();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'localB = '</span>, localB);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1();</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">globalA = 1</span><br><span class="line">localA = 2</span><br><span class="line">localB = 3</span><br><span class="line">Uncaught ReferenceError: localB is not defined</span><br></pre></td></tr></table></figure>
<p>실행 결과를 보면 내부 함수 <code>f2</code>(<strong>내부 스코프</strong>)에서는 외부 함수 <code>f1</code>(<strong>외부 스코프</strong>)에서 선언된 변수에 접근할 수 있는 것을 확인할 수 있다. 하지만 외부 스코프에서는 내부 스코프에서 선언된 변수에 접근할 수 없다.</p>
<h4 id="지역-스코프의-형성"><a href="#지역-스코프의-형성" class="headerlink" title="지역 스코프의 형성"></a>지역 스코프의 형성</h4><h4 id="블록-스코프"><a href="#블록-스코프" class="headerlink" title="블록 스코프"></a>블록 스코프</h4><h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li>Object.prototype.hasOwnProperty –&gt;</li>
</ul>
--></div></article></div></main><footer><div class="paginator"></div><div class="copyright"><p>© 2018 <a href="https://github.com/haeguri">Haegyun Jung</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>