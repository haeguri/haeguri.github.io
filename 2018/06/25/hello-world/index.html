<!DOCTYPE html><html lang="ko"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 자바스크립트 변수 스코프(Scope) · Haeguri 블로그</title><meta name="description" content="자바스크립트 변수 스코프(Scope) - Haegyun Jung"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://github.com/haeguri/atom.xml" title="Haeguri 블로그"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/haeguri" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">자바스크립트 변수 스코프(Scope)</h1><div class="post-info">2018년 6월 25일</div><div class="post-content"><p>변수는 어떤 스코프에서 선언되는가에 따라서 변수에 접근할 수 있는 유효 범위가 달라진다. 프로그래밍 언어는 각자의 스코프 형성 규칙을 갖고 있는데 자바스크립트도 역시 자신만의 규칙을 갖고 있다. 자바스크립트에서 변수의 유효 범위를 정할 수 있는 스코프는 크게 전역 스코프(Global Scope)와 지역 스코프(Local Scope)로 나뉜다.</p>
<h2 id="전역-스코프"><a href="#전역-스코프" class="headerlink" title="전역 스코프"></a>전역 스코프</h2><p>전역 스코프에 변수를 선언하면 해당 변수는 모든 스크립트 코드에서 접근할 수 있게 된다. 전역 변수를 선언하는 가장 기본적인 방법은 함수 밖에서 <code>var</code> 키워드로 변수를 선언하는 것이다.</p>
<h4 id="전역변수-선언-var-키워드"><a href="#전역변수-선언-var-키워드" class="headerlink" title="전역변수 선언 - var 키워드"></a>전역변수 선언 - <code>var</code> 키워드</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    var globalA = 1;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    function print() &#123;</span></span><br><span class="line"><span class="undefined">        console.log(globalA);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    console.log(globalA);</span></span><br><span class="line"><span class="undefined">    print();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    console.log(globalA);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">1</span><br><span class="line">1</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<h4 id="전역변수-선언-window-객체"><a href="#전역변수-선언-window-객체" class="headerlink" title="전역변수 선언 - window 객체"></a>전역변수 선언 - <code>window</code> 객체</h4><p>전역 변수를 선언하는 또 다른 방법이 있는데, 자바스크립트 내장 객체인 <code>window</code> 객체의 프로퍼티에 전역 변수로 사용할 데이터를 추가하는 방법이다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    window.globalA = 1;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    function print() &#123; </span></span><br><span class="line"><span class="undefined">        console.log(globalA); </span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    console.log(globalA);</span></span><br><span class="line"><span class="undefined">    print();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    console.log(globalA); </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">1</span><br><span class="line">1</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p><code>window</code> 객체의 프로퍼티로 <code>globalA</code>를 추가하면, 앞에서 <code>var</code>로 선언한 것과 동일하게 전역변수로서 사용할 수 있게 된다. 반대로 <code>var</code>로 전역 변수를 선언하더라도 <code>window</code> 객체의 프로퍼티로 추가되는데, 이것은 <code>Object.prototype.hasOwnProperty</code> 메서드로 확인해볼 수 있다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var globalA = 1;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">console.log(window.hasOwnProperty(‘globalA’));</span></span><br><span class="line"><span class="undefined">console.log(window.globalA === 1); </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">true</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<p>전역 변수는 어디서든 접근할 수 있기 때문에 편리하지만 값을 변경해버릴 수도 있다. 내가 사용하는 자바스크립트 라이브러리와 충돌이 일어날 수도 있다. 따라서 전역 변수는 최대한 신중하게 선언해야 한다.</p>
<h2 id="지역-스코프"><a href="#지역-스코프" class="headerlink" title="지역 스코프"></a>지역 스코프</h2><p>지역 변수는 전역 변수와 다르게 정해진 유효 범위에서만 접근할 수 있다. 지역 변수를 선언할 수 있는 지역 스코프는 <strong>함수 레벨 스코프(function level scope)</strong>와 ECMAScript 2015부터 추가된 <strong>블록 레벨 스코프(block level scope)</strong>로 나뉜다.</p>
<h4 id="함수-레벨-스코프"><a href="#함수-레벨-스코프" class="headerlink" title="함수 레벨 스코프"></a>함수 레벨 스코프</h4><p>함수 레벨 스코프(줄여서 함수 스코프)는 <strong>함수 단위</strong>로 변수의 유효 범위를 결정한다. 함수 레벨 스코프로 선언된 변수는 함수 바깥에서는 접근할 수 없다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> localA = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(localA);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1(); </span><br><span class="line"><span class="built_in">console</span>.log(localA);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">1</span><br><span class="line">Uncaught ReferenceError: localA is not defined</span><br></pre></td></tr></table></figure>
<h4 id="중첩된-함수-스코프"><a href="#중첩된-함수-스코프" class="headerlink" title="중첩된 함수 스코프"></a>중첩된 함수 스코프</h4><p>한 개의 함수가 아니라, 두 개의 함수가 중첩된 상황에서는 어떻게 될까? </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> localA = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> localB = <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(localA);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f2();</span><br><span class="line">    <span class="built_in">console</span>.log(localB)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1();</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br><span class="line">----------</span><br><span class="line">1</span><br><span class="line">Uncaught ReferenceError: localB is not defined</span><br></pre></td></tr></table></figure>
<p>실행 결과를 보면 내부 함수 <code>f2</code>(<strong>내부 스코프</strong>)에서는 외부 함수 <code>f1</code>(<strong>외부 스코프</strong>)에서 선언된 변수에 접근할 수 있는 것을 확인할 수 있다. 하지만 외부 스코프에서는 내부 스코프에서 선언된 변수에 접근할 수 없다.</p>
<h4 id="지역-스코프의-형성"><a href="#지역-스코프의-형성" class="headerlink" title="지역 스코프의 형성"></a>지역 스코프의 형성</h4><p>지역 스코프는 자바스크립트 코드가 실행되면서 결정되지 않는다. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> localA = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(A);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(localA);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1();</span><br><span class="line">f2();</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ 실행결과 ]</span><br></pre></td></tr></table></figure>
<p>지역 변수의 스코프는 실행되는 런타임에 동적으로 형성되는 것이 아니라 정적으로 이뤄진다. 그 이유는 자바스크립트가 정적으로 스코프가 형성되기 때문인데, 다른 말로 렉시컬 스코핑(Lexical Scoping)이라고 한다.</p>
<h4 id="블록-스코프"><a href="#블록-스코프" class="headerlink" title="블록 스코프"></a>블록 스코프</h4></div></article></div></main><footer><div class="paginator"></div><div class="copyright"><p>© 2018 <a href="https://github.com/haeguri">Haegyun Jung</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>